{"version":3,"sources":["components/Diff.js","components/Display.js","components/Home.js","App.js","index.js"],"names":["Diff","props","useState","difference","setDifference","useEffect","countDifference","data","count","maxCount","i","length","j","rateOnly","Display","selected","setSelected","dataReady","setDataReady","group1","setGroup1","group2","setGroup2","group3","setGroup3","loading","setLoading","groupData","ratesToDisplay","filter","obj","currenciesGroup","allPairs","g1","g2","g3","sort","a","b","push","className","value","onChange","event","target","g1html","map","el","index","pair","g2html","g3html","display","Home","currencies","ratesList","setRatesList","getRates","allData","groupedByCurrency","ONE_DAY","isData","JSON","parse","localStorage","getItem","expiry","nextCleanup","Date","getTime","console","log","removeItem","fetch","toLowerCase","method","response","json","rate","setItem","stringify","dataArray","group","includes","objVal","Object","values","newObj","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7bd1081d.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst Diff = (props) => {\r\n  const [difference, setDifference] = useState(0);\r\n\r\n  useEffect(() => {\r\n    countDifference();\r\n  }, [props.data]);\r\n\r\n  const countDifference = () => {\r\n    let data = props.data;\r\n    let count = 0;\r\n    let maxCount = 0;\r\n\r\n    for (let i = 0; i < data.length - 1; i++) {\r\n      count = 0;\r\n      for (let j = i + 1; j < data.length; j++) {\r\n        if (data[j].rateOnly - data[i].rateOnly <= 0.5) {\r\n          count++;\r\n        } else {\r\n          if (count > maxCount) maxCount = count + 1;\r\n\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    if (count > maxCount) maxCount = count + 1;\r\n    setDifference(maxCount);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        {difference ? (\r\n          <div>\r\n            <h4>\r\n              The length of the longest array, where the absolute difference\r\n              between any two elements of the array is less than or equal to 0.5\r\n            </h4>\r\n            <br></br>\r\n            <h3>{difference}</h3>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Diff;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Diff from \"./Diff\";\r\n\r\nimport \"./Display.css\";\r\n\r\nconst Display = (props) => {\r\n  const [selected, setSelected] = useState(\"USD\");\r\n  const [dataReady, setDataReady] = useState([]);\r\n  const [group1, setGroup1] = useState([]);\r\n  const [group2, setGroup2] = useState([]);\r\n  const [group3, setGroup3] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    groupData();\r\n  }, [selected]);\r\n\r\n  const handleChange = (event) => {\r\n    setSelected(event.target.value);\r\n  };\r\n  //Grouping all data from selected currency\r\n  const groupData = () => {\r\n    const index = props.data.filter((obj) => {\r\n      return obj.currenciesGroup === selected;\r\n    });\r\n    let ratesToDisplay = index[0].allPairs;\r\n\r\n    let g1 = [];\r\n    let g2 = [];\r\n    let g3 = [];\r\n\r\n    ratesToDisplay.sort((a, b) => a.rateOnly - b.rateOnly);\r\n    setDataReady(ratesToDisplay);\r\n    for (let i = 0; i < ratesToDisplay.length; i++) {\r\n      if (ratesToDisplay[i].rateOnly < 1) g1.push(ratesToDisplay[i]);\r\n      if (ratesToDisplay[i].rateOnly >= 1 && ratesToDisplay[i].rateOnly < 1.5)\r\n        g2.push(ratesToDisplay[i]);\r\n      if (ratesToDisplay[i].rateOnly >= 1.5) g3.push(ratesToDisplay[i]);\r\n    }\r\n\r\n    setDataReady(ratesToDisplay);\r\n    setGroup1(g1);\r\n    setGroup2(g2);\r\n    setGroup3(g3);\r\n    setLoading(false);\r\n  };\r\n  //Display the HTML\r\n  const display = () => {\r\n    let g1html = group1.map((el, index) => {\r\n      return (\r\n        <p key={index}>\r\n          {el.pair}: {el.rateOnly}\r\n        </p>\r\n      );\r\n    });\r\n    let g2html = group2.map((el, index) => {\r\n      return (\r\n        <p key={index}>\r\n          {el.pair}: {el.rateOnly}\r\n        </p>\r\n      );\r\n    });\r\n    let g3html = group3.map((el, index) => {\r\n      return (\r\n        <p key={index}>\r\n          {el.pair}: {el.rateOnly}\r\n        </p>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"row\">\r\n          <div className=\"column\">\r\n            <div className=\"card\">\r\n              <h3>Card 1</h3>\r\n              {g1html}\r\n              <h4>Count: {g1html.length}</h4>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"column\">\r\n            <div className=\"card\">\r\n              <h3>Card 2</h3>\r\n              {g2html}\r\n              <h4>Count: {g2html.length}</h4>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"column\">\r\n            <div className=\"card\">\r\n              <h3>Card 3</h3>\r\n              {g3html}\r\n              <h4>Count: {g3html.length}</h4>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"select\">\r\n        <h4>Please choose a currency</h4>\r\n        <select value={selected} onChange={handleChange}>\r\n          <option value=\"USD\">USD</option>\r\n          <option value=\"EUR\">EUR</option>\r\n          <option value=\"AUD\">AUD</option>\r\n          <option value=\"CAD\">CAD</option>\r\n          <option value=\"CHF\">CHF</option>\r\n          <option value=\"NZD\">NZD</option>\r\n          <option value=\"BGN\">BGN</option>\r\n        </select>\r\n      </div>\r\n      {loading ? <div></div> : display()}\r\n      <hr></hr>\r\n      {dataReady ? <Diff data={dataReady} /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Display;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Display from \"./Display\";\r\nconst Home = () => {\r\n  const currencies = [\"USD\", \"EUR\", \"AUD\", \"CAD\", \"CHF\", \"NZD\", \"BGN\"];\r\n  const [ratesList, setRatesList] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  useEffect(() => {\r\n    getRates();\r\n  }, []);\r\n\r\n  //Function for fetching and caching the data\r\n  const getRates = async () => {\r\n    let allData = [];\r\n    let groupedByCurrency = [];\r\n    const ONE_DAY = 1000 * 10;\r\n\r\n    let isData = JSON.parse(localStorage.getItem(\"data\"));\r\n    let expiry = JSON.parse(localStorage.getItem(\"expiry\"));\r\n    if (isData && expiry && expiry.nextCleanup > new Date().getTime()) {\r\n      allData.push(isData);\r\n      console.log(\"gore\");\r\n    } else {\r\n      allData = [];\r\n      console.log(\"dolu\");\r\n      localStorage.removeItem(\"data\");\r\n      localStorage.removeItem(\"expiry\");\r\n      for (let i = 0; i < currencies.length; i++) {\r\n        for (let j = 0; j < currencies.length; j++) {\r\n          if (currencies[j] !== currencies[i]) {\r\n            try {\r\n              const response = await fetch(\r\n                `https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/${currencies[\r\n                  i\r\n                ].toLowerCase()}/${currencies[j].toLowerCase()}.json`,\r\n                {\r\n                  method: \"GET\",\r\n                }\r\n              );\r\n              const json = await response.json();\r\n              allData.push({\r\n                pair: `${currencies[i]}-${currencies[j]}`,\r\n                rate: json,\r\n              });\r\n            } catch (err) {\r\n              console.log(err);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      localStorage.setItem(\"data\", JSON.stringify(allData));\r\n      localStorage.setItem(\r\n        \"expiry\",\r\n        JSON.stringify({\r\n          nextCleanup: new Date().getTime() + ONE_DAY,\r\n        })\r\n      );\r\n    }\r\n    let dataArray = JSON.parse(localStorage.getItem(\"data\"));\r\n    for (let i = 0; i < currencies.length; i++) {\r\n      let group = [];\r\n\r\n      for (let j = 0; j < dataArray.length; j++) {\r\n        if (dataArray[j].pair.includes(`${currencies[i]}`)) {\r\n          let objVal = Object.values(dataArray[j].rate);\r\n          let newObj = {\r\n            pair: dataArray[j].pair,\r\n            rateOnly: objVal[1],\r\n          };\r\n          group.push(newObj);\r\n        }\r\n      }\r\n      groupedByCurrency.push({\r\n        currenciesGroup: currencies[i],\r\n        allPairs: group,\r\n      });\r\n    }\r\n    setRatesList(groupedByCurrency);\r\n    setLoading(false);\r\n  };\r\n\r\n  return <div>{loading ? <h1>Loading</h1> : <Display data={ratesList} />}</div>;\r\n};\r\n\r\nexport default Home;\r\n","import \"./App.css\";\nimport Home from \"./components/Home\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <h1>Healee Task whats up</h1>\n      <h3>Solution by Hristomir Hristov</h3>\n      <Home />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}